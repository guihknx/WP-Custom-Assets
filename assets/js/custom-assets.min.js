/*! 
* Custom Assets for WordPress - v1.0.0
* 
* 31-07-2014 2:7:33
* http://github.com/guihknx/
* Guilherme Henrique - Copyright (c) 2014 
* 
* 

* Licensed MIT  
*/!function(a){var b=function(){this.initialize()};b.prototype.initialize=function(){if("custom-assets_page_add-js-inline"==pagenow&&this.jsEditor(),"custom-assets_page_add-css-file"==pagenow&&this.cssEditor(),"custom-assets_page_edit_custom-assets"==pagenow){var b=a(".wrap").find("pre")[0].id;"js-editor"==b?this.jsEditor():this.cssEditor()}this.handleUI()},b.prototype.handleUI=function(){var b=1==a("#save-css").length?"css":"js",c={},d=a("#toplevel_page_custom-assets").find(".wp-submenu").find("li");a(d[4]).css("display","none"),a(d[5]).css("display","none"),this.itemDisplay("add-remote-js","remote-js"),this.itemDisplay("add-remote-css","remote-css"),a(".save-code-to-db").on("click",function(){c=this.serializeAsObject("css"==b?"save-css":"save-js"),this.sendData(c)}.bind(this)),a(".delete-item").on("click",function(){var b=a(this).data("id");a(".item-edit-"+b).css("display","none"),a(".item-delete-comfirm-"+b).show(),a(this).hide()}),a(".cancel-exlusion").on("click",function(){var b=a(this).data("id");a(".item-edit-"+b).css("display","inline"),a(".item-delete-"+b).css("display","inline"),a(".item-delete-comfirm-"+b).hide()}),a(".yes-remove").on("click",function(){var b=a(this).parent().data("id");window.location.href="admin.php?page=delete_custom-assets&_id="+b})},b.prototype.cssEditor=function(){this.instanceEditor("css-editor",{lang:"css",elasticEditor:!0})},b.prototype.jsEditor=function(){this.instanceEditor("js-editor",{theme:"monokai",lang:"javascript",elasticEditor:!0})},b.prototype.instanceEditor=function(b,c){var d=ace.edit(b),e=d.getSession();_global=d,"custom-assets_page_edit_custom-assets"==pagenow&&a("#temp_code").val(e.getValue()),null!==c.theme&&d.setTheme("ace/theme/"+c.theme),e.setMode("ace/mode/"+c.lang),1==c.elasticEditor?d.setOptions({maxLines:1/0}):a("#"+b).css({height:200}),d.on("change",function(){d.curOp&&d.curOp.command.name&&a("#temp_code").val(e.getValue())}),d.on("input",function(){a("#temp_code").val(e.getValue())})},b.prototype.itemDisplay=function(b,c){var d=a("#"+b),c=a("#"+c);d.on("click",function(){c.is(":visible")?(d.removeClass("remove").html(ajax_utils.strings.addRemoteJs),c.hide()):(d.addClass("remove").html("&times; "+ajax_utils.strings.cancel),c.show().find("input").focus())})},b.prototype.sendData=function(b){var c=1==a("#save-css").length?"css":"js";return""==a("#temp_code").val()&&""==a(".remote-resource").val()?void this.setValue("js"==c?"//code...":"/* code... */"):void a.ajax({url:ajax_utils.ajaxurl,data:{type:c,inner:b,action:"wpaci17089_add"},type:"POST",beforeSend:function(){a(".save-code-to-db").text("Saving").attr("disabled",!0),a(".spinner-saving").fadeIn("slow")}}).complete(function(){setTimeout(function(){a(".save-code-to-db").text("Saved!").text("Save").removeAttr("disabled"),a(".spinner-saving").fadeOut(function(){a("#item-added").is(":visible")?a("#item-added").fadeOut(function(){a("#item-added").fadeIn()}):a("#item-added").fadeIn()})},2e3)})},b.prototype.serializeAsObject=function(b){var c=a("#"+b).serializeArray(),d={};for(var e in c)d[c[e].name]=encodeURIComponent(c[e].value);return d},b.prototype.setValue=function(a){_global.setValue(a,1)},a(function(){return new b||{}})}(jQuery);